"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(a){a.fn.ddslick=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==_typeof(e)&&e?void a.error("Method "+e+" does not exists."):d.init.apply(this,arguments)};var d={},e={data:[],keepJSONItemsOnTop:!1,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,embedCSS:!0,onSelected:function(){}};function c(e,d){var t,i,o,n,s=e.data("ddslick"),l=e.find(".dd-selected"),a=l.siblings(".dd-selected-value"),c=(e.find(".dd-options"),l.siblings(".dd-pointer"),e.find(".dd-option").eq(d)),r=c.closest("li"),p=s.settings,f=s.settings.data[d];e.find(".dd-option").removeClass("dd-option-selected"),c.addClass("dd-option-selected"),s.selectedIndex=d,s.selectedItem=r,s.selectedData=f,p.showSelectedHTML?l.html((f.imageSrc?'<img class="dd-selected-image'+("right"==p.imagePosition?" dd-image-right":"")+'" src="'+f.imageSrc+'" />':"")+(f.text?'<label class="dd-selected-text">'+f.text+"</label>":"")+(f.description?'<small class="dd-selected-description dd-desc'+(p.truncateDescription?" dd-selected-description-truncated":"")+'" >'+f.description+"</small>":"")):l.html(f.text),a.val(f.value),s.original.val(f.value),e.data("ddslick",s),u(e),i=(t=e).find(".dd-select").css("height"),o=t.find(".dd-selected-description"),n=t.find(".dd-selected-image"),o.length<=0&&0<n.length&&t.find(".dd-selected-text").css("lineHeight",i),"function"==typeof p.onSelected&&p.onSelected.call(this,s)}function r(e){var o,d=e.find(".dd-select"),t=d.siblings(".dd-options"),i=d.find(".dd-pointer"),n=t.is(":visible");a(".dd-click-off-close").not(t).slideUp(50),a(".dd-pointer").removeClass("dd-pointer-up"),n?(t.slideUp("fast"),i.removeClass("dd-pointer-up")):(t.slideDown("fast"),i.addClass("dd-pointer-up")),(o=e).find(".dd-option").each(function(){var e=a(this),d=e.css("height"),t=e.find(".dd-option-description"),i=o.find(".dd-option-image");t.length<=0&&0<i.length&&e.find(".dd-option-text").css("lineHeight",d)})}function u(e){e.find(".dd-options").slideUp(50),e.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}d.init=function(l){l=a.extend({},e,l);return a("#css-ddslick").length<=0&&l.embedCSS&&a('<style id="css-ddslick" type="text/css">.dd-select{ border-radius:2px; border:solid 1px #ccc; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; padding:10px; font-weight:bold;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}​ .dd-selected-text { font-weight:bold}​</style>').appendTo("head"),this.each(function(){var e,d,t,i,o,n,s=a(this);s.data("ddslick")||(t=[],l.data,s.find("option").each(function(){var e=a(this),d=e.data();t.push({text:a.trim(e.text()),value:e.val(),selected:e.is(":selected"),description:d.description,imageSrc:d.imagesrc})}),l.keepJSONItemsOnTop?a.merge(l.data,t):l.data=a.merge(t,l.data),d=a('<div id="'+(e=s).attr("id")+'"></div>'),s.replaceWith(d),(s=d).addClass("dd-container").append('<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>').append('<ul class="dd-options"></ul>'),t=s.find(".dd-select"),(i=s.find(".dd-options")).css({width:l.width}),t.css({width:l.width,background:l.background}),s.css({width:l.width}),null!=l.height&&i.css({height:l.height,overflow:"auto"}),a.each(l.data,function(e,d){d.selected&&(l.defaultSelectedIndex=e),i.append('<li><a class="dd-option">'+(d.value?' <input class="dd-option-value" type="hidden" value="'+d.value+'" />':"")+(d.imageSrc?' <img class="dd-option-image'+("right"==l.imagePosition?" dd-image-right":"")+'" src="'+d.imageSrc+'" />':"")+(d.text?' <label class="dd-option-text">'+d.text+"</label>":"")+(d.description?' <small class="dd-option-description dd-desc">'+d.description+"</small>":"")+"</a></li>")}),o={settings:l,original:e,selectedIndex:-1,selectedItem:null,selectedData:null},s.data("ddslick",o),0<l.selectText.length&&null==l.defaultSelectedIndex?s.find(".dd-selected").html(l.selectText):(n=null!=l.defaultSelectedIndex&&0<=l.defaultSelectedIndex&&l.defaultSelectedIndex<l.data.length?l.defaultSelectedIndex:0,c(s,n)),s.find(".dd-select").on("click.ddslick",function(){r(s)}),s.find(".dd-option").on("click.ddslick",function(){c(s,a(this).closest("li").index())}),l.clickOffToClose&&(i.addClass("dd-click-off-close"),s.on("click.ddslick",function(e){e.stopPropagation()}),a("body").on("click",function(){a(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")})))})},d.select=function(e){return this.each(function(){void 0!==e.index&&c(a(this),e.index)})},d.open=function(){return this.each(function(){var e=a(this);e.data("ddslick")&&r(e)})},d.close=function(){return this.each(function(){var e=a(this);e.data("ddslick")&&u(e)})},d.destroy=function(){return this.each(function(){var e,d=a(this),t=d.data("ddslick");t&&(e=t.original,d.removeData("ddslick").unbind(".ddslick").replaceWith(e))})}}(jQuery);